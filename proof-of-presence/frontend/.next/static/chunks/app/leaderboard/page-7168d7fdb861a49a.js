(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{2454:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(2115),n=s(2844);function l(e){let{timeframe:t,onTimeframeChange:s,sortBy:r,onSortChange:n}=e;return(0,a.jsx)("div",{className:"card mb-6",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Timeframe"}),(0,a.jsx)("div",{className:"flex gap-2",children:["week","month","all-time"].map(e=>(0,a.jsx)("button",{onClick:()=>s(e),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t===e?"bg-primary text-background":"bg-surface-light text-foreground hover:bg-surface"),children:"week"===e?"This Week":"month"===e?"This Month":"All Time"},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Sort By"}),(0,a.jsx)("div",{className:"flex gap-2",children:["reputation","badges"].map(e=>(0,a.jsx)("button",{onClick:()=>n(e),className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(r===e?"bg-primary text-background":"bg-surface-light text-foreground hover:bg-surface"),children:"reputation"===e?"Reputation":"Badges"},e))})]})]})})}function d(e){var t;let{user:s,rank:r}=e,n=1===r?"\uD83E\uDD47":2===r?"\uD83E\uDD48":3===r?"\uD83E\uDD49":null;return(0,a.jsxs)("div",{className:"card hover:border-primary transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-lg font-bold text-background",children:r}),n&&(0,a.jsx)("span",{className:"text-2xl",children:n})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-primary",children:s.reputation_score||0}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:"reputation"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-1",children:s.display_name||"Anonymous"}),(0,a.jsxs)("p",{className:"text-foreground-muted text-sm font-mono",children:[null===(t=s.wallet_address)||void 0===t?void 0:t.slice(0,12),"..."]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t border-surface-light",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:"Badges"}),(0,a.jsx)("p",{className:"text-lg font-bold",children:s.badge_count||0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:"Minted"}),(0,a.jsx)("p",{className:"text-lg font-bold",children:s.minted_count||0})]})]})]})}function o(e){let{users:t}=e,[s,n]=(0,r.useState)("reputation"),l=[...t].sort((e,t)=>"reputation"===s?(t.reputation_score||0)-(e.reputation_score||0):(t.badge_count||0)-(e.badge_count||0)),d=e=>1===e?"\uD83E\uDD47":2===e?"\uD83E\uDD48":3===e?"\uD83E\uDD49":null;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>n("reputation"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("reputation"===s?"bg-primary text-background":"bg-surface-light text-foreground hover:bg-surface"),children:"By Reputation"}),(0,a.jsx)("button",{onClick:()=>n("badges"),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("badges"===s?"bg-primary text-background":"bg-surface-light text-foreground hover:bg-surface"),children:"By Badges"})]}),(0,a.jsxs)("div",{className:"card overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-surface-light",children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground-muted",children:"Rank"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-sm font-semibold text-foreground-muted",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-sm font-semibold text-foreground-muted",children:"Reputation"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-sm font-semibold text-foreground-muted",children:"Badges"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-sm font-semibold text-foreground-muted",children:"Minted"})]})}),(0,a.jsx)("tbody",{children:l.map((e,t)=>{var s;let r=d(t+1);return(0,a.jsxs)("tr",{className:"border-b border-surface-light hover:bg-surface-light transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-lg font-bold text-primary",children:["#",t+1]}),r&&(0,a.jsx)("span",{className:"text-xl",children:r})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.display_name||"Anonymous"}),(0,a.jsxs)("p",{className:"text-foreground-muted text-sm font-mono",children:[null===(s=e.wallet_address)||void 0===s?void 0:s.slice(0,10),"..."]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("span",{className:"text-lg font-bold text-primary",children:e.reputation_score||0})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("span",{className:"text-lg font-bold",children:e.badge_count||0})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsx)("span",{className:"text-lg font-bold text-accent",children:e.minted_count||0})})]},e.wallet_address)})})]})}),0===t.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-foreground-muted",children:"No users on the leaderboard yet"})})]})]})}var i=s(3580);function c(){let[e,t]=(0,r.useState)([]),[s,c]=(0,r.useState)(!1),[x,m]=(0,r.useState)("all-time"),[u,h]=(0,r.useState)("reputation"),{toast:p}=(0,i.dj)();(0,r.useEffect)(()=>{g()},[x,u]);let g=async()=>{c(!0);try{let e=await n.mi.get(100);t(e.data.leaderboard||[])}catch(e){p({title:"Error",description:"Failed to load leaderboard",variant:"destructive"})}finally{c(!1)}},f=e.slice(0,3);return e.slice(3),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Leaderboard"}),(0,a.jsx)("p",{className:"text-foreground-muted",children:"Compete with other event attendees and build your reputation"})]}),(0,a.jsx)(l,{timeframe:x,onTimeframeChange:m,sortBy:u,onSortChange:h}),s?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-foreground-muted",children:"Loading leaderboard..."})}):(0,a.jsxs)(a.Fragment,{children:[f.length>0&&(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Top Performers"}),(0,a.jsx)("div",{className:"grid md:grid-cols-3 gap-6",children:f.map((e,t)=>(0,a.jsx)(d,{user:e,rank:t+1},e.wallet_address))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Full Rankings"}),(0,a.jsx)(o,{users:e})]})]})]})}},2844:(e,t,s)=>{"use strict";s.d(t,{Gh:()=>d,_F:()=>o,mi:()=>i,nR:()=>l});var a=s(3464);let r=s(7358).env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",n=a.A.create({baseURL:r,headers:{"Content-Type":"application/json"}}),l={create:e=>n.post("/events/create",e),generateQR:e=>n.post("/events/generate-qr",e),mintBadge:e=>n.post("/events/mint-badge",e)},d={verify:e=>n.post("/events/verify-qr",e)},o={get:e=>n.get("/profile/".concat(e)),update:e=>n.put("/profile/update",e)},i={get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return n.get("/leaderboard",{params:{limit:e}})}}},3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var a=s(2115);let r=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],i={toasts:[]};function c(e){i=d(i,e),o.forEach(e=>{e(i)})}function x(e){let t=(r=(r+1)%Number.MAX_VALUE).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=a.useState(i);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:x,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9286:(e,t,s)=>{Promise.resolve().then(s.bind(s,2454))}},e=>{var t=t=>e(e.s=t);e.O(0,[134,464,441,684,358],()=>t(9286)),_N_E=e.O()}]);