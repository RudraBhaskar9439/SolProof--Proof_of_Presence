(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{136:(e,t,s)=>{Promise.resolve().then(s.bind(s,3371))},1392:(e,t,s)=>{"use strict";s.d(t,{b:()=>r,v:()=>d});var a=s(2115);let n=[],l={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){i("call","select")},connect:()=>Promise.reject(i("call","connect")),disconnect:()=>Promise.reject(i("call","disconnect")),sendTransaction:()=>Promise.reject(i("call","sendTransaction")),signTransaction:()=>Promise.reject(i("call","signTransaction")),signAllTransactions:()=>Promise.reject(i("call","signAllTransactions")),signMessage:()=>Promise.reject(i("call","signMessage")),signIn:()=>Promise.reject(i("call","signIn"))};function i(e,t){let s=Error(`You have tried to ${e} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(s),s}Object.defineProperty(l,"wallets",{get:()=>(i("read","wallets"),n)}),Object.defineProperty(l,"wallet",{get:()=>(i("read","wallet"),null)}),Object.defineProperty(l,"publicKey",{get:()=>(i("read","publicKey"),null)});let r=(0,a.createContext)(l);function d(){return(0,a.useContext)(r)}},2844:(e,t,s)=>{"use strict";s.d(t,{Gh:()=>r,_F:()=>d,mi:()=>c,nR:()=>i});var a=s(3464);let n=s(7358).env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",l=a.A.create({baseURL:n,headers:{"Content-Type":"application/json"}}),i={create:e=>l.post("/events/create",e),generateQR:e=>l.post("/events/generate-qr",e),mintBadge:e=>l.post("/events/mint-badge",e)},r={verify:e=>l.post("/events/verify-qr",e)},d={get:e=>l.get("/profile/".concat(e)),update:e=>l.put("/profile/update",e)},c={get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return l.get("/leaderboard",{params:{limit:e}})}}},3371:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),n=s(2115),l=s(7472),i=s(2844),r=s(3580);function d(e){var t,s,l,d;let{profile:c,onEdit:o,onProfileUpdated:m}=e,[u,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)(c.display_name||""),[f,g]=(0,n.useState)(c.bio||""),[v,b]=(0,n.useState)(!1),{toast:j}=(0,r.dj)(),N=async()=>{b(!0);try{await i._F.update({displayName:h,bio:f}),j({title:"Success",description:"Profile updated successfully"}),x(!1),m()}catch(s){var e,t;j({title:"Error",description:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to update profile",variant:"destructive"})}finally{b(!1)}},y=c.reputation_score||0,w=(null===(t=c.attendances)||void 0===t?void 0:t.length)||0;return(0,a.jsxs)("div",{className:"card mb-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-accent rounded-full flex items-center justify-center text-2xl font-bold text-background",children:(null===(s=c.display_name)||void 0===s?void 0:s.charAt(0).toUpperCase())||"U"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:c.display_name||"Anonymous User"}),(0,a.jsxs)("p",{className:"text-foreground-muted text-sm font-mono",children:[null===(l=c.wallet_address)||void 0===l?void 0:l.slice(0,10),"..."]})]})]}),c.bio&&(0,a.jsx)("p",{className:"text-foreground-muted",children:c.bio})]}),(0,a.jsx)("button",{onClick:()=>x(!u),className:"btn-secondary",children:u?"Cancel":"Edit Profile"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6 pt-6 border-t border-surface-light",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:w}),(0,a.jsx)("p",{className:"text-foreground-muted text-sm",children:"Badges Earned"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:y}),(0,a.jsx)("p",{className:"text-foreground-muted text-sm",children:"Reputation Score"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:(null===(d=c.attendances)||void 0===d?void 0:d.filter(e=>e.transaction_signature).length)||0}),(0,a.jsx)("p",{className:"text-foreground-muted text-sm",children:"Minted Badges"})]})]}),u&&(0,a.jsxs)("div",{className:"space-y-4 pt-6 border-t border-surface-light",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Display Name"}),(0,a.jsx)("input",{type:"text",className:"input-field",value:h,onChange:e=>p(e.target.value),placeholder:"Your display name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),(0,a.jsx)("textarea",{className:"input-field",value:f,onChange:e=>g(e.target.value),placeholder:"Tell us about yourself",rows:3})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>x(!1),className:"btn-secondary flex-1",children:"Cancel"}),(0,a.jsx)("button",{onClick:N,disabled:v,className:"btn-primary flex-1",children:v?"Saving...":"Save Changes"})]})]})]})}function c(e){var t,s;let{profile:n}=e,l=(null===(t=n.attendances)||void 0===t?void 0:t.length)||0,i=(null===(s=n.attendances)||void 0===s?void 0:s.filter(e=>e.transaction_signature).length)||0,r=n.reputation_score||0,d=Math.floor(r/100)+1,c=100*d,o=r%100/100*100;return(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-foreground-muted mb-4",children:"Reputation Level"}),(0,a.jsxs)("div",{className:"flex items-end gap-4",children:[(0,a.jsx)("div",{className:"text-5xl font-bold text-primary",children:d}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-2xl font-bold mb-2",children:r}),(0,a.jsx)("div",{className:"w-full bg-surface-light rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:"".concat(o,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-foreground-muted mt-2",children:[c-r," points to level ",d+1]})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-foreground-muted mb-4",children:"Activity"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-foreground-muted",children:"Events Attended"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-primary",children:l})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-foreground-muted",children:"Badges Minted"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-primary",children:i})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-foreground-muted",children:"Mint Rate"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-primary",children:[l>0?Math.round(i/l*100):0,"%"]})]})]})]})]})}function o(e){var t,s,n,l,i,r;let{profile:d}=e,c=[{id:"first-event",name:"First Step",description:"Attend your first event",icon:"\uD83C\uDFAB",unlocked:((null===(t=d.attendances)||void 0===t?void 0:t.length)||0)>=1,unlockedAt:null===(n=d.attendances)||void 0===n?void 0:null===(s=n[0])||void 0===s?void 0:s.checked_in_at},{id:"five-events",name:"Event Enthusiast",description:"Attend 5 events",icon:"\uD83C\uDFAF",unlocked:((null===(l=d.attendances)||void 0===l?void 0:l.length)||0)>=5},{id:"ten-events",name:"Event Master",description:"Attend 10 events",icon:"\uD83C\uDFC6",unlocked:((null===(i=d.attendances)||void 0===i?void 0:i.length)||0)>=10},{id:"five-minted",name:"NFT Collector",description:"Mint 5 badges",icon:"\uD83D\uDC8E",unlocked:((null===(r=d.attendances)||void 0===r?void 0:r.filter(e=>e.transaction_signature).length)||0)>=5},{id:"reputation-100",name:"Rising Star",description:"Reach 100 reputation",icon:"⭐",unlocked:(d.reputation_score||0)>=100},{id:"reputation-500",name:"Legend",description:"Reach 500 reputation",icon:"\uD83D\uDC51",unlocked:(d.reputation_score||0)>=500}],o=c.filter(e=>e.unlocked).length;return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Achievements"}),(0,a.jsxs)("p",{className:"text-foreground-muted",children:[o," of ",c.length," unlocked"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:c.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-lg border-2 transition-all ".concat(e.unlocked?"bg-surface-light border-primary":"bg-surface border-surface-light opacity-50"),children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:e.icon}),(0,a.jsx)("h3",{className:"font-semibold text-sm mb-1",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-foreground-muted",children:e.description}),e.unlocked&&e.unlockedAt&&(0,a.jsxs)("p",{className:"text-xs text-primary mt-2",children:["Unlocked ",new Date(e.unlockedAt).toLocaleDateString()]})]},e.id))})]})}function m(e){var t,s,l;let{badge:d,onMinted:c}=e,[o,m]=(0,n.useState)(!1),{toast:u}=(0,r.dj)(),x=async()=>{m(!0);try{await i.nR.mintBadge({attendanceId:d.id,eventId:d.event_id}),u({title:"Success",description:"Badge minted successfully!"}),null==c||c()}catch(s){var e,t;u({title:"Error",description:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to mint badge",variant:"destructive"})}finally{m(!1)}},h=!!d.transaction_signature,p=(null===(t=d.events)||void 0===t?void 0:t.event_name)||"Event Badge",f=new Date(d.checked_in_at).toLocaleDateString(),g=(null===(s=d.events)||void 0===s?void 0:s.nft_image_url)||"/nft-badge.jpg";return(0,a.jsxs)("div",{className:"card overflow-hidden hover:border-primary transition-all duration-200 flex flex-col",children:[(0,a.jsxs)("div",{className:"relative w-full h-48 bg-surface-light overflow-hidden rounded-lg mb-4",children:[(0,a.jsx)("img",{src:g||"/placeholder.svg",alt:p,className:"w-full h-full object-cover"}),h&&(0,a.jsx)("div",{className:"absolute top-2 right-2 bg-primary text-background px-3 py-1 rounded-full text-xs font-semibold",children:"Minted"})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-1 text-balance",children:p}),(0,a.jsx)("p",{className:"text-foreground-muted text-sm mb-4",children:f}),(0,a.jsxs)("div",{className:"space-y-2 text-sm mb-4 flex-1",children:[(null===(l=d.events)||void 0===l?void 0:l.description)&&(0,a.jsx)("p",{className:"text-foreground-muted line-clamp-2",children:d.events.description}),h&&(0,a.jsxs)("div",{className:"bg-surface-light rounded p-2 font-mono text-xs text-foreground-muted break-all",children:[d.transaction_signature.slice(0,20),"..."]})]}),!h&&(0,a.jsx)("button",{onClick:x,disabled:o,className:"btn-primary w-full text-sm py-2",children:o?"Minting...":"Mint Badge"}),h&&(0,a.jsx)("button",{disabled:!0,className:"w-full px-4 py-2 bg-surface-light text-foreground-muted rounded-lg text-sm font-medium cursor-not-allowed",children:"Badge Minted"})]})]})}function u(e){let{badges:t,onBadgeMinted:s}=e,[l,i]=(0,n.useState)(0),r=t.filter(e=>!!e.transaction_signature),d=t.filter(e=>!e.transaction_signature),c=()=>{i(e=>e+1),null==s||s()};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Event Badges"}),(0,a.jsxs)("p",{className:"text-foreground-muted",children:[t.length," badge",1!==t.length?"s":""," earned",r.length>0&&" • ".concat(r.length," minted")]})]}),0===t.length?(0,a.jsxs)("div",{className:"card text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDFAB"}),(0,a.jsx)("p",{className:"text-foreground-muted",children:"No badges yet. Attend events to earn badges!"})]}):(0,a.jsxs)(a.Fragment,{children:[d.length>0&&(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-foreground-muted",children:"Ready to Mint"}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>(0,a.jsx)(m,{badge:e,onMinted:c},"".concat(e.id,"-").concat(l)))})]}),r.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4 text-foreground-muted",children:"Minted Badges"}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,a.jsx)(m,{badge:e},"".concat(e.id,"-").concat(l)))})]})]})]})}function x(e){let{profile:t,onClose:s,onSave:l}=e,[i,d]=(0,n.useState)({displayName:t.display_name||"",bio:t.bio||"",showOnLeaderboard:!1!==t.show_on_leaderboard,emailNotifications:!1!==t.email_notifications}),[c,o]=(0,n.useState)(!1),{toast:m}=(0,r.dj)(),u=async()=>{o(!0);try{m({title:"Success",description:"Settings saved successfully"}),l()}catch(e){m({title:"Error",description:"Failed to save settings",variant:"destructive"})}finally{o(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-surface rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Profile Settings"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Display Name"}),(0,a.jsx)("input",{type:"text",className:"input-field",value:i.displayName,onChange:e=>d({...i,displayName:e.target.value}),placeholder:"Your display name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),(0,a.jsx)("textarea",{className:"input-field",value:i.bio,onChange:e=>d({...i,bio:e.target.value}),placeholder:"Tell us about yourself",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-3 pt-4 border-t border-surface-light",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Privacy & Notifications"}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.showOnLeaderboard,onChange:e=>d({...i,showOnLeaderboard:e.target.checked}),className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Show on leaderboard"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:i.emailNotifications,onChange:e=>d({...i,emailNotifications:e.target.checked}),className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Email notifications"})]})]}),(0,a.jsxs)("div",{className:"pt-4 border-t border-surface-light",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Connected Wallet"}),(0,a.jsx)("p",{className:"text-sm font-mono text-foreground-muted break-all",children:t.wallet_address})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-surface-light mt-6",children:[(0,a.jsx)("button",{onClick:s,className:"btn-secondary flex-1",children:"Cancel"}),(0,a.jsx)("button",{onClick:u,disabled:c,className:"btn-primary flex-1",children:c?"Saving...":"Save"})]})]})})}function h(){let{connected:e,publicKey:t}=(0,l.X)(),[s,m]=(0,n.useState)(null),[h,p]=(0,n.useState)(!1),[f,g]=(0,n.useState)(!1),{toast:v}=(0,r.dj)();(0,n.useEffect)(()=>{e&&t&&b()},[e,t]);let b=async()=>{p(!0);try{let e=await i._F.get(t);m(e.data)}catch(e){v({title:"Error",description:"Failed to load profile",variant:"destructive"})}finally{p(!1)}};return e?h?(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12 text-center",children:(0,a.jsx)("p",{className:"text-foreground-muted",children:"Loading profile..."})}):(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(d,{profile:s,onEdit:()=>{},onProfileUpdated:b})}),(0,a.jsx)("button",{onClick:()=>g(!0),className:"btn-secondary ml-4",children:"Settings"})]}),(0,a.jsx)(c,{profile:s}),(0,a.jsx)(o,{profile:s}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(u,{badges:s.attendances||[],onBadgeMinted:b})}),f&&(0,a.jsx)(x,{profile:s,onClose:()=>g(!1),onSave:()=>{g(!1),b()}})]})}):(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12 text-center",children:(0,a.jsx)("p",{className:"text-foreground-muted",children:"Please connect your wallet to view your profile"})})}},3580:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(2115);let n=0,l=new Map,i=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},r=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],c={toasts:[]};function o(e){c=r(c,e),d.forEach(e=>{e(c)})}function m(e){let t=(n=(n+1)%Number.MAX_VALUE).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},7472:(e,t,s)=>{"use strict";s.d(t,{X:()=>l});var a=s(1392),n=s(2115);function l(){let{publicKey:e,connected:t,connect:s,disconnect:l,wallet:i}=(0,a.v)(),r=(0,n.useCallback)(async()=>{if(!t&&i)try{await s()}catch(e){console.error("Failed to connect wallet:",e)}},[t,s,i]),d=(0,n.useCallback)(async()=>{if(t)try{await l()}catch(e){console.error("Failed to disconnect wallet:",e)}},[t,l]);return{publicKey:null==e?void 0:e.toString(),connected:t,connectWallet:r,disconnectWallet:d,wallet:i}}}},e=>{var t=t=>e(e.s=t);e.O(0,[134,464,441,684,358],()=>t(136)),_N_E=e.O()}]);