(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{2844:(e,t,a)=>{"use strict";a.d(t,{Gh:()=>i,_F:()=>c,mi:()=>o,nR:()=>l});var s=a(3464);let n=a(7358).env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api",r=s.A.create({baseURL:n,headers:{"Content-Type":"application/json"}}),l={create:e=>r.post("/events/create",e),generateQR:e=>r.post("/events/generate-qr",e),mintBadge:e=>r.post("/events/mint-badge",e)},i={verify:e=>r.post("/events/verify-qr",e)},c={get:e=>r.get("/profile/".concat(e)),update:e=>r.put("/profile/update",e)},o={get:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return r.get("/leaderboard",{params:{limit:e}})}}},3580:(e,t,a)=>{"use strict";a.d(t,{dj:()=>p});var s=a(2115);let n=0,r=new Map,l=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=i(o,e),c.forEach(e=>{e(o)})}function u(e){let t=(n=(n+1)%Number.MAX_VALUE).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=s.useState(o);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},6697:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(5155),n=a(2115),r=a(7472),l=a(6874),i=a.n(l);function c(e){let{event:t}=e;return(0,s.jsxs)("div",{className:"card hover:border-primary transition-colors cursor-pointer",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:t.event_name}),(0,s.jsx)("p",{className:"text-foreground-muted text-sm",children:t.description})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm mb-4",children:[(0,s.jsxs)("p",{className:"text-foreground-muted",children:["\uD83D\uDCC5 ",new Date(t.event_date).toLocaleDateString()]}),(0,s.jsxs)("p",{className:"text-foreground-muted",children:["\uD83D\uDCCD ",t.location]}),(0,s.jsxs)("p",{className:"text-foreground-muted",children:["\uD83D\uDC65 ",t.current_attendees,"/",t.max_attendees," attendees"]})]}),(0,s.jsx)(i(),{href:"/events/".concat(t.id),className:"btn-secondary w-full text-center block",children:"View Details"})]})}var o=a(2844),d=a(3580);function u(e){let{onClose:t,onSuccess:a,organizerWallet:r}=e,[l,i]=(0,n.useState)(!1),[c,u]=(0,n.useState)({eventId:"",eventName:"",description:"",eventDate:"",location:"",maxAttendees:"100"}),{toast:p}=(0,d.dj)(),m=async e=>{e.preventDefault(),i(!0);try{await o.nR.create({...c,organizerWallet:r,maxAttendees:Number.parseInt(c.maxAttendees)}),a()}catch(e){var t,s;p({title:"Error",description:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to create event",variant:"destructive"})}finally{i(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-surface rounded-lg p-6 max-w-md w-full",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create Event"}),(0,s.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Event ID",className:"input-field",value:c.eventId,onChange:e=>u({...c,eventId:e.target.value}),required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Event Name",className:"input-field",value:c.eventName,onChange:e=>u({...c,eventName:e.target.value}),required:!0}),(0,s.jsx)("textarea",{placeholder:"Description",className:"input-field",value:c.description,onChange:e=>u({...c,description:e.target.value})}),(0,s.jsx)("input",{type:"datetime-local",className:"input-field",value:c.eventDate,onChange:e=>u({...c,eventDate:e.target.value}),required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Location",className:"input-field",value:c.location,onChange:e=>u({...c,location:e.target.value})}),(0,s.jsx)("input",{type:"number",placeholder:"Max Attendees",className:"input-field",value:c.maxAttendees,onChange:e=>u({...c,maxAttendees:e.target.value})}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:t,className:"btn-secondary flex-1",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"btn-primary flex-1",children:l?"Creating...":"Create"})]})]})]})})}function p(){let{connected:e,publicKey:t}=(0,r.X)(),[a,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(!1),[p,m]=(0,n.useState)(!1),{toast:x}=(0,d.dj)();(0,n.useEffect)(()=>{e&&v()},[e]);let v=async()=>{o(!0);try{l([])}catch(e){x({title:"Error",description:"Failed to load events",variant:"destructive"})}finally{o(!1)}};return e?(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Events"}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"btn-primary",children:"Create Event"})]}),p&&(0,s.jsx)(u,{onClose:()=>m(!1),onSuccess:()=>{m(!1),v(),x({title:"Success",description:"Event created successfully"})},organizerWallet:t}),i?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-foreground-muted",children:"Loading events..."})}):0===a.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-foreground-muted mb-4",children:"No events yet"}),(0,s.jsx)("button",{onClick:()=>m(!0),className:"btn-primary",children:"Create the first event"})]}):(0,s.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,s.jsx)(c,{event:e},e.id))})]}):(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12 text-center",children:(0,s.jsx)("p",{className:"text-foreground-muted",children:"Please connect your wallet to view events"})})}},6719:(e,t,a)=>{Promise.resolve().then(a.bind(a,6697))},7472:(e,t,a)=>{"use strict";a.d(t,{X:()=>r});var s=a(1392),n=a(2115);function r(){let{publicKey:e,connected:t,connect:a,disconnect:r,wallet:l}=(0,s.v)(),i=(0,n.useCallback)(async()=>{if(!t&&l)try{await a()}catch(e){console.error("Failed to connect wallet:",e)}},[t,a,l]),c=(0,n.useCallback)(async()=>{if(t)try{await r()}catch(e){console.error("Failed to disconnect wallet:",e)}},[t,r]);return{publicKey:null==e?void 0:e.toString(),connected:t,connectWallet:i,disconnectWallet:c,wallet:l}}}},e=>{var t=t=>e(e.s=t);e.O(0,[134,464,585,441,684,358],()=>t(6719)),_N_E=e.O()}]);